(()=>{"use strict";var e={2707:(e,t,n)=>{var o=n(9993),a=n(7087),r=n(9984),i=n(3929),l=n(484),s=n(5648),d=n(5708),c=n(6283),u=n(6773),f=n(3668),g=n(6665),h=n(397);function m(){const e=(0,r.useNavigation)(),[t,n]=(0,g.useState)(""),[o,a]=(0,g.useState)(""),[l,s]=(0,g.useState)(!1),[f,m]=(0,g.useState)("");return(0,h.jsxs)(i.default,{style:x.container,children:[(0,h.jsx)(c.default,{style:x.title,children:"Iniciar Sesi\xf3n"}),(0,h.jsxs)(i.default,{style:x.inputContainer,children:[(0,h.jsx)(c.default,{style:x.label,children:"Correo electr\xf3nico"}),(0,h.jsx)(u.default,{style:x.input,value:t,onChangeText:n,placeholder:"tucorreo@ejemplo.com",keyboardType:"email-address",autoCapitalize:"none"})]}),(0,h.jsxs)(i.default,{style:x.inputContainer,children:[(0,h.jsx)(c.default,{style:x.label,children:"Contrase\xf1a"}),(0,h.jsx)(u.default,{style:x.input,value:o,onChangeText:a,placeholder:"Tu contrase\xf1a",secureTextEntry:!0})]}),f&&(0,h.jsx)(i.default,{style:x.errorContainer,children:(0,h.jsx)(c.default,{style:x.errorText,children:f})}),(0,h.jsx)(d.default,{onPress:async()=>{if(t&&o){s(!0);try{const n=await fetch("https://conectasolidariaapi.vercel.app/api/general/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:o})}),a=await n.json();if(!n.ok)throw new Error(a.message||"Error al iniciar sesi\xf3n");localStorage.setItem("token",a.token),e.navigate(2===a.user.role_id?"Crear Evento":"Eventos Disponibles")}catch(f){m(f.message||"Error al iniciar sesi\xf3n. Verifica tus credenciales.")}finally{s(!1)}}else m("Por favor ingresa correo y contrase\xf1a")},style:[x.button,l&&x.buttonDisabled],disabled:l,children:(0,h.jsx)(c.default,{style:x.buttonText,children:l?"Iniciando sesi\xf3n...":"Iniciar Sesi\xf3n"})}),(0,h.jsx)(i.default,{style:x.footer,children:(0,h.jsxs)(i.default,{style:x.registerContainer,children:[(0,h.jsx)(c.default,{style:x.footerText,children:"\xbfNo tienes una cuenta? "}),(0,h.jsx)(d.default,{onPress:()=>e.navigate("Registro"),children:(0,h.jsx)(c.default,{style:x.linkText,children:"Reg\xedstrate"})})]})})]})}const x=f.default.create({errorContainer:{backgroundColor:"#F4F6F7",padding:10,marginHorizontal:20,marginBottom:20,borderRadius:8,borderWidth:1,borderColor:"#2E86AB",width:"100%"},errorText:{color:"#1C2833",textAlign:"center",fontSize:14},container:{flex:1,justifyContent:"center",backgroundColor:"#F4F6F7",alignItems:"center",padding:20},logo:{width:100,height:100,borderRadius:50,marginBottom:20},title:{fontSize:24,fontWeight:"700",color:"#1C2833",marginBottom:30},inputContainer:{width:"100%",marginBottom:20},label:{fontSize:16,fontWeight:"500",color:"#1C2833",marginBottom:8},input:{backgroundColor:"#FFFFFF",width:"100%",padding:15,borderRadius:10,borderWidth:1,borderColor:"#A9CCE3",fontSize:16},button:{backgroundColor:"#2E86AB",width:"100%",padding:15,borderRadius:10,alignItems:"center",marginTop:10},buttonDisabled:{backgroundColor:"#A9CCE3"},buttonText:{color:"#FFFFFF",fontWeight:"700",fontSize:16},footer:{marginTop:30,alignItems:"center"},registerContainer:{flexDirection:"row"},footerText:{color:"#1C2833",fontSize:14},linkText:{color:"#2E86AB",fontSize:14,fontWeight:"500"}});var p=n(4307);function y({navigation:e}){const[t,n]=(0,g.useState)({username:"",email:"",password:"",confirmPassword:"",full_name:"",phone_number:"",role_name:"volunteer",organization_description:""}),[o,a]=(0,g.useState)(!1),[r,l]=(0,g.useState)(""),s=(e,t)=>{n((n=>Object.assign({},n,{[e]:t})))};return(0,h.jsxs)(p.default,{contentContainerStyle:b.container,children:[(0,h.jsx)(c.default,{style:b.title,children:"Registro"}),(0,h.jsxs)(i.default,{style:b.inputContainer,children:[(0,h.jsx)(c.default,{style:b.label,children:"Nombre de usuario *"}),(0,h.jsx)(u.default,{style:b.input,placeholder:"username",value:t.username,onChangeText:e=>s("username",e),autoCapitalize:"none"})]}),(0,h.jsxs)(i.default,{style:b.inputContainer,children:[(0,h.jsx)(c.default,{style:b.label,children:"Correo electr\xf3nico *"}),(0,h.jsx)(u.default,{style:b.input,placeholder:"tucorreo@ejemplo.com",value:t.email,onChangeText:e=>s("email",e),keyboardType:"email-address",autoCapitalize:"none"})]}),(0,h.jsxs)(i.default,{style:b.inputContainer,children:[(0,h.jsx)(c.default,{style:b.label,children:"Nombre completo *"}),(0,h.jsx)(u.default,{style:b.input,placeholder:"Tu nombre completo",value:t.full_name,onChangeText:e=>s("full_name",e)})]}),(0,h.jsxs)(i.default,{style:b.inputContainer,children:[(0,h.jsx)(c.default,{style:b.label,children:"Tel\xe9fono *"}),(0,h.jsx)(u.default,{style:b.input,placeholder:"123456789",value:t.phone_number,onChangeText:e=>s("phone_number",e),keyboardType:"phone-pad"})]}),(0,h.jsxs)(i.default,{style:b.inputContainer,children:[(0,h.jsx)(c.default,{style:b.label,children:"Contrase\xf1a *"}),(0,h.jsx)(u.default,{style:b.input,placeholder:"Tu contrase\xf1a",value:t.password,onChangeText:e=>s("password",e),secureTextEntry:!0})]}),(0,h.jsxs)(i.default,{style:b.inputContainer,children:[(0,h.jsx)(c.default,{style:b.label,children:"Confirmar contrase\xf1a *"}),(0,h.jsx)(u.default,{style:b.input,placeholder:"Confirma tu contrase\xf1a",value:t.confirmPassword,onChangeText:e=>s("confirmPassword",e),secureTextEntry:!0})]}),(0,h.jsxs)(i.default,{style:b.inputContainer,children:[(0,h.jsx)(c.default,{style:b.label,children:"Tipo de cuenta *"}),(0,h.jsxs)(i.default,{style:b.roleContainer,children:[(0,h.jsx)(d.default,{style:[b.roleButton,"volunteer"===t.role_name&&b.roleButtonSelected],onPress:()=>s("role_name","volunteer"),children:(0,h.jsx)(c.default,{style:[b.roleButtonText,"volunteer"===t.role_name&&b.roleButtonTextSelected],children:"Voluntario"})}),(0,h.jsx)(d.default,{style:[b.roleButton,"organization"===t.role_name&&b.roleButtonSelected],onPress:()=>s("role_name","organization"),children:(0,h.jsx)(c.default,{style:[b.roleButtonText,"organization"===t.role_name&&b.roleButtonTextSelected],children:"Organizaci\xf3n"})})]})]}),"organization"===t.role_name&&(0,h.jsxs)(i.default,{style:b.inputContainer,children:[(0,h.jsx)(c.default,{style:b.label,children:"Descripci\xf3n de la organizaci\xf3n *"}),(0,h.jsx)(u.default,{style:[b.input,b.textArea],placeholder:"Describe brevemente tu organizaci\xf3n...",value:t.organization_description,onChangeText:e=>s("organization_description",e),multiline:!0,numberOfLines:4})]}),r?(0,h.jsx)(i.default,{style:b.errorContainer,children:(0,h.jsx)(c.default,{style:b.errorText,children:r})}):null,(0,h.jsx)(d.default,{style:[b.button,o&&b.buttonDisabled],onPress:async()=>{if(t.username&&t.email&&t.password&&t.confirmPassword&&t.full_name&&t.phone_number)if("organization"!==t.role_name||t.organization_description)if(t.password===t.confirmPassword){a(!0);try{const n=await fetch("https://conectasolidariaapi.vercel.app/api/general/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.assign({},t,{organization_description:t.organization_description||null}))}),o=await n.json();if(!n.ok)throw new Error(o.message||"Error al registrar usuario");e.navigate("Iniciar Sesi\xf3n")}catch(r){l(r.message||"Error al registrar usuario")}finally{a(!1)}}else l("Las contrase\xf1as no coinciden");else l("Por favor, a\xf1ade una descripci\xf3n de tu organizaci\xf3n");else l("Por favor completa todos los campos obligatorios")},disabled:o,children:(0,h.jsx)(c.default,{style:b.buttonText,children:o?"Registrando...":"Registrarse"})}),(0,h.jsxs)(i.default,{style:b.registerContainer,children:[(0,h.jsx)(c.default,{style:b.footerText,children:"\xbfYa tienes una cuenta? "}),(0,h.jsx)(d.default,{onPress:()=>e.navigate("Iniciar Sesi\xf3n"),children:(0,h.jsx)(c.default,{style:b.linkText,children:"Iniciar Sesi\xf3n"})})]})]})}const b=f.default.create({container:{flexGrow:1,justifyContent:"center",padding:20,backgroundColor:"#F4F6F7"},errorContainer:{backgroundColor:"#F4F6F7",padding:10,marginBottom:20,borderRadius:8,borderWidth:1,borderColor:"#2E86AB",width:"100%"},errorText:{color:"#1C2833",textAlign:"center",fontSize:14},logo:{width:100,height:100,alignSelf:"center",marginBottom:20,borderRadius:50},title:{fontSize:24,fontWeight:"bold",textAlign:"center",marginBottom:30,color:"#1C2833"},inputContainer:{marginBottom:15},label:{fontSize:16,marginBottom:5,color:"#1C2833"},input:{backgroundColor:"#FFFFFF",padding:12,borderRadius:8,borderWidth:1,borderColor:"#A9CCE3",fontSize:16},textArea:{height:100,textAlignVertical:"top"},roleContainer:{flexDirection:"row",justifyContent:"space-between",marginTop:5},roleButton:{flex:1,padding:12,borderRadius:8,borderWidth:1,borderColor:"#A9CCE3",marginHorizontal:5,backgroundColor:"#FFFFFF"},roleButtonSelected:{backgroundColor:"#2E86AB",borderColor:"#2E86AB"},roleButtonText:{textAlign:"center",fontSize:16,color:"#1C2833"},roleButtonTextSelected:{color:"#FFFFFF"},button:{backgroundColor:"#2E86AB",padding:15,borderRadius:8,marginTop:20},buttonDisabled:{backgroundColor:"#A9CCE3"},buttonText:{color:"#FFFFFF",textAlign:"center",fontSize:16,fontWeight:"bold"},registerContainer:{flexDirection:"row",justifyContent:"center",alignItems:"center",marginTop:20,marginBottom:20},footerText:{color:"#1C2833",fontSize:14},linkText:{color:"#2E86AB",fontSize:14,fontWeight:"500"}});var C=n(1690),j=(n(9162),n(7910)),v=n(9050),F=n(5259);const S=e=>{if(!e)return"";return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}T${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`},T=({value:e,onChange:t})=>{const[n,o]=(0,g.useState)(!1);return(0,h.jsx)("input",{style:Object.assign({},E.input,{padding:12,borderRadius:8,borderWidth:1,borderColor:"#ddd",fontSize:16}),type:"datetime-local",value:S(e),onChange:e=>{if(e.target.value){const n=new Date(e.target.value);t(n)}}})};function w(){const e=(0,r.useNavigation)();g.useEffect((()=>{e.setOptions({title:"Crear Evento"})}),[e]);const[t,n]=(0,g.useState)({title:"",description:"",location:"",event_date:null,volunteer_limit:0,image:null}),[o,a]=(0,g.useState)(!1),[s,f]=(0,g.useState)(""),m=(e,t)=>{if("volunteer_limit"===e){const o=t.replace(/[^0-9]/g,"");n((t=>Object.assign({},t,{[e]:o})))}else n((n=>Object.assign({},n,{[e]:t})))};return(0,h.jsxs)(i.default,{style:E.mainContainer,children:[(0,h.jsxs)(p.default,{style:E.container,children:[(0,h.jsx)(c.default,{style:E.title,children:"Crear Nuevo Evento"}),(0,h.jsxs)(i.default,{style:E.inputContainer,children:[(0,h.jsx)(c.default,{style:E.label,children:"Imagen del evento"}),(0,h.jsx)(d.default,{style:E.imageButton,onPress:async()=>{const e=await j.launchImageLibraryAsync({mediaTypes:v.MediaTypeOptions.Images,allowsEditing:!0,aspect:[16,9],quality:.5});e.canceled||n((t=>Object.assign({},t,{image:e.assets[0].uri})))},children:(0,h.jsx)(c.default,{style:E.imageButtonText,children:t.image?"Cambiar imagen":"Seleccionar imagen"})}),t.image&&(0,h.jsxs)(i.default,{style:E.imageContainer,children:[(0,h.jsx)(l.default,{source:{uri:t.image},style:E.previewImage}),(0,h.jsx)(d.default,{style:E.removeImageButton,onPress:()=>n((e=>Object.assign({},e,{image:null}))),children:(0,h.jsx)(c.default,{style:E.removeImageText,children:"\u2715"})})]})]}),(0,h.jsxs)(i.default,{style:E.inputContainer,children:[(0,h.jsx)(c.default,{style:E.label,children:"T\xedtulo del evento *"}),(0,h.jsx)(u.default,{style:E.input,placeholder:"Ej: Limpieza de playa",value:t.title,onChangeText:e=>m("title",e)})]}),(0,h.jsxs)(i.default,{style:E.inputContainer,children:[(0,h.jsx)(c.default,{style:E.label,children:"Descripci\xf3n *"}),(0,h.jsx)(u.default,{style:[E.input,E.textArea],placeholder:"Describe el evento...",value:t.description,onChangeText:e=>m("description",e),multiline:!0,numberOfLines:4})]}),(0,h.jsxs)(i.default,{style:E.inputContainer,children:[(0,h.jsx)(c.default,{style:E.label,children:"Ubicaci\xf3n *"}),(0,h.jsx)(u.default,{style:E.input,placeholder:"Ej: Playa San Juan, Alicante",value:t.location,onChangeText:e=>m("location",e)})]}),(0,h.jsxs)(i.default,{style:E.inputContainer,children:[(0,h.jsxs)(c.default,{style:E.label,children:["Maximo voluntarios * ",(0,h.jsx)(c.default,{style:[{color:"#FF0000",fontSize:14}],children:"(Despu\xe9s no se puede modificar)"})]}),(0,h.jsx)(u.default,{style:E.input,placeholder:"0",keyboardType:"numeric",value:t.volunteer_limit,onChangeText:e=>m("volunteer_limit",e)})]}),(0,h.jsxs)(i.default,{style:E.inputContainer,children:[(0,h.jsx)(c.default,{style:E.label,children:"Fecha y hora *"}),(0,h.jsx)(T,{value:t.event_date,onChange:e=>{n((t=>Object.assign({},t,{event_date:e})))}})]}),s?(0,h.jsx)(i.default,{style:E.errorContainer,children:(0,h.jsx)(c.default,{style:E.errorText,children:s})}):null,(0,h.jsx)(d.default,{style:[E.button,o&&E.buttonDisabled],onPress:async()=>{if(t.title&&t.description&&t.location&&t.event_date){a(!0);try{const n=new Date(t.event_date);if(isNaN(n.getTime()))throw new Error("Fecha inv\xe1lida");const o=new FormData;o.append("title",t.title),o.append("description",t.description),o.append("location",t.location);const a=e=>e<10?"0"+e:e,r=`${n.getFullYear()}-${a(n.getMonth()+1)}-${a(n.getDate())} ${a(n.getHours())}:${a(n.getMinutes())}:${a(n.getSeconds())}`;if(o.append("event_date",r),o.append("volunteer_limit",t.volunteer_limit||"0"),t.image){const e=t.image,n=e.split("/").pop(),a=/\.(\w+)$/.exec(n);a&&a[1];try{const t=await fetch(e),a=await t.blob();o.append("image_file",a,n)}catch(s){C.default.alert("Advertencia","No se pudo procesar la imagen. El evento se crear\xe1 sin imagen.")}}const i=await F.default.getItem("token");if(!i)throw new Error("No hay sesi\xf3n activa. Por favor, inicia sesi\xf3n nuevamente.");const l=await fetch("https://conectasolidariaapi.vercel.app/api/ong/create",{method:"POST",headers:{Authorization:`Bearer ${i}`},body:o});if(!l.ok)throw new Error(`Error del servidor (${l.status}). Por favor, int\xe9ntalo m\xe1s tarde o contacta al administrador.`);await l.json();C.default.alert("\xc9xito","Evento creado correctamente"),e.navigate("Eventos Creados")}catch(s){f(s.message||"Error al crear el evento")}finally{a(!1)}}else f("Por favor completa todos los campos")},disabled:o,children:(0,h.jsx)(c.default,{style:E.buttonText,children:o?"Creando...":"Crear Evento"})})]}),(0,h.jsxs)(i.default,{style:E.bottomMenu,children:[(0,h.jsx)(d.default,{style:E.menuItem,children:(0,h.jsx)(c.default,{style:[E.menuText,E.activeMenuItem],children:"Crear Evento"})}),(0,h.jsx)(d.default,{style:E.menuItem,onPress:()=>e.navigate("Eventos Creados"),children:(0,h.jsx)(c.default,{style:E.menuText,children:"Mis Eventos"})}),(0,h.jsx)(d.default,{style:E.menuItem,onPress:()=>e.navigate("Perfil"),children:(0,h.jsx)(c.default,{style:E.menuText,children:"Perfil"})})]})]})}const E=f.default.create({errorContainer:{backgroundColor:"#F4F6F7",padding:10,marginHorizontal:20,marginBottom:20,borderRadius:8,borderWidth:1,borderColor:"#2E86AB"},errorText:{color:"#1C2833",textAlign:"center",fontSize:14},mainContainer:{flex:1,backgroundColor:"#F4F6F7"},container:{flex:1,padding:20},bottomMenu:{flexDirection:"row",justifyContent:"space-around",alignItems:"center",backgroundColor:"#2E86AB",paddingVertical:12,borderTopWidth:1,borderTopColor:"#A9CCE3"},menuItem:{flex:1,alignItems:"center",paddingVertical:8},menuText:{fontSize:14,color:"#F4F6F7"},activeMenuItem:{color:"#F4F6F7",fontWeight:"bold"},title:{fontSize:24,fontWeight:"bold",marginBottom:30,color:"#1C2833",textAlign:"center"},inputContainer:{marginBottom:20},label:{fontSize:16,marginBottom:5,color:"#1C2833"},input:{backgroundColor:"#F4F6F7",padding:12,borderRadius:8,borderWidth:1,borderColor:"#A9CCE3",fontSize:16},textArea:{height:100,textAlignVertical:"top"},dateButton:{backgroundColor:"#F4F6F7",padding:15,borderRadius:8,marginTop:5,borderWidth:1,borderColor:"#A9CCE3"},dateButtonText:{fontSize:16,color:"#1C2833"},button:{backgroundColor:"#2E86AB",padding:15,borderRadius:8,marginTop:20},buttonDisabled:{backgroundColor:"#A9CCE3"},buttonText:{color:"#F4F6F7",textAlign:"center",fontSize:16,fontWeight:"bold"},imageButton:{backgroundColor:"#2E86AB",padding:12,borderRadius:8,marginVertical:16,alignItems:"center"},imageButtonText:{color:"#F4F6F7",fontSize:16,fontWeight:"bold"},imageContainer:{position:"relative",marginTop:10},removeImageButton:{position:"absolute",top:10,right:10,backgroundColor:"rgba(28, 40, 51, 0.5)",width:30,height:30,borderRadius:15,justifyContent:"center",alignItems:"center"},removeImageText:{color:"#F4F6F7",fontSize:16,fontWeight:"bold"},previewImage:{width:"100%",height:200,borderRadius:8,marginBottom:16}});var B=n(2660),z=n(8264);function I(){const e=(0,r.useNavigation)(),[t,n]=(0,g.useState)([]),[o,a]=(0,g.useState)(!0),[s,u]=(0,g.useState)(!1),[f,m]=(0,g.useState)(!1),[x,y]=(0,g.useState)({}),[b,C]=(0,g.useState)(null),[j,v]=(0,g.useState)(""),F=async()=>{try{const e=localStorage.getItem("token");if(!e)return;const t=await fetch("https://conectasolidariaapi.vercel.app/api/volunteer/user-registrations",{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const e=await t.json(),n={};e.forEach((e=>{n[e]=!0})),y(n)}}catch(j){console.error("Error fetching user registrations:",j)}},S=async()=>{try{const e=await fetch("https://conectasolidariaapi.vercel.app/api/volunteer/list"),t=await e.json();e.ok?(n(t),await F()):console.error("Error fetching events:",t)}catch(j){console.error("Error:",j)}finally{a(!1),u(!1)}},T=()=>{u(!0),S()};return(0,g.useEffect)((()=>{S()}),[]),o?(0,h.jsx)(i.default,{style:k.container,children:(0,h.jsx)(c.default,{children:"Cargando eventos..."})}):(0,h.jsxs)(i.default,{style:k.mainContainer,children:[(0,h.jsxs)(p.default,{style:k.container,refreshControl:(0,h.jsx)(B.default,{refreshing:s,onRefresh:T}),children:[(0,h.jsx)(c.default,{style:[k.title,{cursor:"pointer"}],onClick:T,children:"Eventos Disponibles"}),0===t.length?(0,h.jsx)(c.default,{style:k.noEvents,children:"No hay eventos disponibles"}):t.map((e=>(0,h.jsxs)(i.default,{style:k.eventCard,children:[(0,h.jsxs)(i.default,{style:k.eventContent,children:[(0,h.jsxs)(i.default,{style:k.textContent,children:[(0,h.jsx)(c.default,{style:k.eventTitle,children:e.title}),(0,h.jsx)(c.default,{style:k.eventDate,children:e.event_date?new Date(e.event_date).toLocaleString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Fecha no disponible"}),(0,h.jsx)(c.default,{style:k.eventDescription,children:e.description}),(0,h.jsxs)(c.default,{style:k.eventLocation,children:["\ud83d\udccd ",e.location]}),(0,h.jsxs)(c.default,{style:k.volunteerLimit,children:["\ud83d\udc65 Plazas m\xe1ximas: ",e.volunteer_limit||"Sin l\xedmite"]})]}),e.image_url&&(0,h.jsx)(d.default,{onPress:()=>C(e.image_url),children:(0,h.jsx)(l.default,{source:{uri:e.image_url},style:k.eventImage})})]}),(0,h.jsx)(d.default,{style:[k.registerButton,x[e.event_id]&&k.registeredButton],onPress:()=>(async e=>{try{const t=localStorage.getItem("token");if(!t)return void v("Por favor, inicia sesi\xf3n nuevamente");const n=x[e];m(!0);const o=n?`https://conectasolidariaapi.vercel.app/api/volunteer/unregister/${e}`:"https://conectasolidariaapi.vercel.app/api/volunteer/register",a=await fetch(o,{method:n?"DELETE":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:n?void 0:JSON.stringify({event_id:e,registration_date:(new Date).toISOString().slice(0,19).replace("T"," ")})});if(a.ok)y(n?t=>{const n=Object.assign({},t);return delete n[e],n}:t=>Object.assign({},t,{[e]:!0})),await S(),await F();else{const e=await a.json();v(e.message||"Error al procesar la solicitud")}}catch(j){v("Error al procesar la solicitud")}finally{m(!1)}})(e.event_id),disabled:f,children:(0,h.jsx)(c.default,{style:k.registerButtonText,children:x[e.event_id]?"Cancelar inscripci\xf3n":"Inscribirse"})})]},e.event_id)))]}),(0,h.jsxs)(i.default,{style:k.bottomMenu,children:[(0,h.jsx)(d.default,{style:k.menuItem,children:(0,h.jsx)(c.default,{style:[k.menuText,k.activeMenuItem],children:"Ver Eventos"})}),(0,h.jsx)(d.default,{style:k.menuItem,onPress:()=>e.navigate("Eventos Pasados"),children:(0,h.jsx)(c.default,{style:k.menuText,children:"Eventos pasados"})}),(0,h.jsx)(d.default,{style:k.menuItem,onPress:()=>e.navigate("Perfil"),children:(0,h.jsx)(c.default,{style:k.menuText,children:"Perfil"})})]}),(0,h.jsx)(z.default,{visible:null!==b,transparent:!0,onRequestClose:()=>C(null),children:(0,h.jsxs)(i.default,{style:k.modalContainer,children:[(0,h.jsx)(l.default,{source:{uri:b},style:k.modalImage}),(0,h.jsx)(d.default,{style:k.closeButton,onPress:()=>C(null),children:(0,h.jsx)(c.default,{style:k.closeButtonText,children:"\u2715"})})]})})]})}const k=f.default.create({registeredButton:{backgroundColor:"#f7020f"},mainContainer:{flex:1,backgroundColor:"#F4F6F7"},bottomMenu:{flexDirection:"row",justifyContent:"space-around",alignItems:"center",backgroundColor:"#2E86AB",paddingVertical:12,borderTopWidth:1,borderTopColor:"#A9CCE3"},menuItem:{flex:1,alignItems:"center",paddingVertical:8},menuText:{fontSize:14,color:"#F4F6F7"},activeMenuItem:{color:"#F4F6F7",fontWeight:"bold"},container:{flex:1,backgroundColor:"#F4F6F7",padding:16},title:{fontSize:24,fontWeight:"bold",marginBottom:20,color:"#1C2833",textAlign:"center"},eventCard:{backgroundColor:"#FFFFFF",borderRadius:12,padding:16,marginBottom:16,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3,borderWidth:1,borderColor:"#A9CCE3"},eventContent:{flexDirection:"row",justifyContent:"space-between",marginBottom:10},textContent:{flex:1,marginRight:10},eventImage:{width:120,height:120,borderRadius:8,alignSelf:"center"},eventTitle:{fontSize:18,fontWeight:"bold",color:"#1C2833",marginBottom:8},eventDate:{fontSize:14,color:"#1C2833",marginBottom:8},eventDescription:{fontSize:16,color:"#1C2833",marginBottom:8,lineHeight:22},eventLocation:{fontSize:14,color:"#1C2833"},volunteerLimit:{fontSize:14,color:"#1C2833",marginTop:8,fontWeight:"500"},noEvents:{textAlign:"center",fontSize:16,color:"#1C2833",marginTop:20},registerButton:{backgroundColor:"#2E86AB",padding:12,borderRadius:8,marginTop:12,alignItems:"center"},registerButtonDisabled:{backgroundColor:"#A9CCE3"},registerButtonText:{color:"#F4F6F7",fontWeight:"bold",fontSize:14},modalContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.9)"},modalImage:{width:"100%",height:"100%",resizeMode:"contain"},closeButton:{position:"absolute",top:10,right:10,backgroundColor:"#F4F6F7",borderRadius:15,width:30,height:30,justifyContent:"center",alignItems:"center"},closeButtonText:{color:"#1C2833",fontSize:18,fontWeight:"bold"}});function A(){const e=(0,r.useNavigation)(),[t,n]=(0,g.useState)([]),[o,a]=(0,g.useState)(!0),[l,s]=(0,g.useState)(!1),[u,f]=(0,g.useState)(""),m=async()=>{try{const e=localStorage.getItem("token");if(!e)return void f("Por favor, inicia sesi\xf3n nuevamente");const t=await fetch("https://conectasolidariaapi.vercel.app/api/volunteer/user-events",{headers:{Authorization:`Bearer ${e}`}}),o=await t.json();t.ok?n(o):f(o.message||"Error al cargar los eventos")}catch(u){f("Error al cargar los eventos")}finally{a(!1),s(!1)}};return(0,g.useEffect)((()=>{m()}),[]),o?(0,h.jsx)(i.default,{style:_.container,children:(0,h.jsx)(c.default,{children:"Cargando eventos..."})}):(0,h.jsxs)(i.default,{style:_.mainContainer,children:[(0,h.jsxs)(p.default,{style:_.container,refreshControl:(0,h.jsx)(B.default,{refreshing:l,onRefresh:()=>{s(!0),m()}}),children:[(0,h.jsx)(c.default,{style:_.title,children:"Eventos Pasados"}),u&&(0,h.jsx)(c.default,{style:_.errorText,children:u}),0===t.length?(0,h.jsx)(c.default,{style:_.noEvents,children:"No est\xe1s inscrito en ning\xfan evento"}):t.map((e=>(0,h.jsxs)(i.default,{style:_.eventCard,children:[(0,h.jsx)(c.default,{style:_.eventTitle,children:e.title}),(0,h.jsx)(c.default,{style:_.eventDate,children:e.event_date?new Date(e.event_date).toLocaleString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Fecha no disponible"}),(0,h.jsx)(c.default,{style:_.eventDescription,children:e.description}),(0,h.jsxs)(c.default,{style:_.eventLocation,children:["\ud83d\udccd ",e.location]}),(0,h.jsxs)(c.default,{style:_.volunteerLimit,children:["\ud83d\udc65 Plazas m\xe1ximas: ",e.volunteer_limit||"Sin l\xedmite"]})]},e.event_id)))]}),(0,h.jsxs)(i.default,{style:_.bottomMenu,children:[(0,h.jsx)(d.default,{style:_.menuItem,onPress:()=>e.navigate("Eventos Disponibles"),children:(0,h.jsx)(c.default,{style:_.menuText,children:"Ver Eventos"})}),(0,h.jsx)(d.default,{style:_.menuItem,children:(0,h.jsx)(c.default,{style:[_.menuText,_.activeMenuItem],children:"Eventos pasados"})}),(0,h.jsx)(d.default,{style:_.menuItem,onPress:()=>e.navigate("Perfil"),children:(0,h.jsx)(c.default,{style:_.menuText,children:"Perfil"})})]})]})}const _=f.default.create({mainContainer:{flex:1,backgroundColor:"#F4F6F7"},bottomMenu:{flexDirection:"row",justifyContent:"space-around",alignItems:"center",backgroundColor:"#2E86AB",paddingVertical:12,borderTopWidth:1,borderTopColor:"#A9CCE3"},menuItem:{flex:1,alignItems:"center",paddingVertical:8},menuText:{fontSize:14,color:"#F4F6F7"},activeMenuItem:{color:"#F4F6F7",fontWeight:"bold"},container:{flex:1,backgroundColor:"#F4F6F7",padding:16},title:{fontSize:24,fontWeight:"bold",marginBottom:20,color:"#1C2833",textAlign:"center"},eventCard:{backgroundColor:"#FFFFFF",borderRadius:12,padding:16,marginBottom:16,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3,borderWidth:1,borderColor:"#A9CCE3"},eventTitle:{fontSize:18,fontWeight:"bold",color:"#1C2833",marginBottom:8},eventDate:{fontSize:14,color:"#1C2833",marginBottom:8},eventDescription:{fontSize:16,color:"#1C2833",marginBottom:8,lineHeight:22},eventLocation:{fontSize:14,color:"#1C2833"},volunteerLimit:{fontSize:14,color:"#1C2833",marginTop:8,fontWeight:"500"},noEvents:{textAlign:"center",fontSize:16,color:"#1C2833",marginTop:20},errorText:{color:"#FF0000",textAlign:"center",fontSize:14,marginBottom:10}}),P=f.default.create({mainContainer:{flex:1,backgroundColor:"#F4F6F7"},container:{flex:1,backgroundColor:"#F4F6F7",padding:16},title:{fontSize:24,fontWeight:"bold",marginBottom:20,color:"#1C2833",textAlign:"center"},modalContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},deleteModalContent:{backgroundColor:"#F4F6F7",padding:20,borderRadius:10,alignItems:"center"},deleteModalText:{fontSize:16,marginBottom:20,textAlign:"center",color:"#1C2833"},deleteModalButtons:{flexDirection:"row",justifyContent:"center",width:"100%"},actionButton:{paddingVertical:10,paddingHorizontal:20,borderRadius:5,minWidth:100,alignItems:"center"},confirmButton:{backgroundColor:"#2E86AB"},actionButtonText:{color:"#F4F6F7",fontWeight:"bold"},inputContainer:{marginBottom:16},label:{fontSize:16,color:"#1C2833",marginBottom:8},input:{backgroundColor:"#FFFFFF",borderRadius:8,padding:12,fontSize:16,borderWidth:1,borderColor:"#A9CCE3"},textArea:{minHeight:100,textAlignVertical:"top"},button:{backgroundColor:"#2E86AB",borderRadius:8,padding:16,alignItems:"center",marginTop:20},buttonText:{color:"#F4F6F7",fontSize:16,fontWeight:"bold"},bottomMenu:{flexDirection:"row",justifyContent:"space-around",alignItems:"center",backgroundColor:"#2E86AB",paddingVertical:12,borderTopWidth:1,borderTopColor:"#A9CCE3"},menuItem:{flex:1,alignItems:"center",paddingVertical:8},menuText:{fontSize:14,color:"#F4F6F7"},activeMenuItem:{color:"#F4F6F7",fontWeight:"bold"},staticText:{fontSize:16,color:"#1C2833",padding:12,backgroundColor:"#F4F6F7",borderRadius:8},errorContainer:{backgroundColor:"#F4F6F7",padding:10,marginBottom:20,borderRadius:8,borderWidth:1,borderColor:"#2E86AB"},errorText:{color:"#1C2833",textAlign:"center",fontSize:14},buttonDisabled:{backgroundColor:"#A9CCE3"}}),D=()=>{const e=(0,r.useNavigation)(),[t,n]=(0,g.useState)({username:"",email:"",phone_number:"",organization_description:null,role_name:""}),[o,a]=(0,g.useState)(!1),[l,s]=(0,g.useState)(""),[f,m]=(0,g.useState)(!1),[x,y]=(0,g.useState)(""),b=(e,t)=>{n((n=>Object.assign({},n,{[e]:t})))};(0,g.useEffect)((()=>{(async()=>{try{const t=localStorage.getItem("token");if(!t)return void e.navigate("Iniciar Sesi\xf3n");const o=await fetch("https://conectasolidariaapi.vercel.app/api/general/profile",{headers:{Authorization:`Bearer ${t}`}}),a=await o.json();if(!o.ok)throw new Error(a.message||"Error al obtener datos del usuario");n(a)}catch(l){s(l.message)}})()}),[]);return(0,h.jsxs)(i.default,{style:P.mainContainer,children:[(0,h.jsxs)(p.default,{style:P.container,children:[(0,h.jsx)(c.default,{style:P.title,children:"Mi Perfil"}),(0,h.jsxs)(i.default,{style:P.inputContainer,children:[(0,h.jsx)(c.default,{style:P.label,children:"Nombre de usuario:"}),(0,h.jsx)(u.default,{style:P.input,value:t.username,onChangeText:e=>b("username",e),placeholder:"Tu nombre de usuario"})]}),(0,h.jsxs)(i.default,{style:P.inputContainer,children:[(0,h.jsx)(c.default,{style:P.label,children:"Email:"}),(0,h.jsx)(u.default,{style:P.input,value:t.email,onChangeText:e=>b("email",e),placeholder:"Tu email"})]}),(0,h.jsxs)(i.default,{style:P.inputContainer,children:[(0,h.jsx)(c.default,{style:P.label,children:"Tel\xe9fono:"}),(0,h.jsx)(u.default,{style:P.input,value:t.phone_number,onChangeText:e=>b("phone_number",e),placeholder:"Tu n\xfamero de tel\xe9fono",keyboardType:"phone-pad"})]}),"organization"===t.role_name&&(0,h.jsxs)(i.default,{style:P.inputContainer,children:[(0,h.jsx)(c.default,{style:P.label,children:"Descripci\xf3n de la organizaci\xf3n:"}),(0,h.jsx)(u.default,{style:[P.input,P.textArea],value:t.organization_description,onChangeText:e=>b("organization_description",e),placeholder:"Describe tu organizaci\xf3n...",multiline:!0,numberOfLines:4})]}),l?(0,h.jsx)(i.default,{style:P.errorContainer,children:(0,h.jsx)(c.default,{style:P.errorText,children:l})}):null,(0,h.jsx)(d.default,{style:[P.button,o&&P.buttonDisabled],onPress:async()=>{try{a(!0);const n=localStorage.getItem("token");if(!n)return void e.navigate("Iniciar Sesi\xf3n");const o=await fetch("https://conectasolidariaapi.vercel.app/api/general/update-profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(t)}),r=await o.json();if(!o.ok)throw new Error(r.message||"Error al actualizar el perfil");y("Perfil actualizado correctamente"),m(!0)}catch(l){s(l.message)}finally{a(!1)}},disabled:o,children:(0,h.jsx)(c.default,{style:P.buttonText,children:o?"Guardando...":"Guardar Cambios"})})]}),(0,h.jsx)(i.default,{style:P.bottomMenu,children:"organization"===t.role_name?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(d.default,{style:P.menuItem,onPress:()=>e.navigate("Crear Evento"),children:(0,h.jsx)(c.default,{style:P.menuText,children:"Crear Evento"})}),(0,h.jsx)(d.default,{style:P.menuItem,onPress:()=>e.navigate("Eventos Creados"),children:(0,h.jsx)(c.default,{style:P.menuText,children:"Mis Eventos"})}),(0,h.jsx)(d.default,{style:P.menuItem,children:(0,h.jsx)(c.default,{style:[P.menuText,P.activeMenuItem],children:"Perfil"})})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(d.default,{style:P.menuItem,onPress:()=>e.navigate("Eventos Disponibles"),children:(0,h.jsx)(c.default,{style:P.menuText,children:"Ver Eventos"})}),(0,h.jsx)(d.default,{style:P.menuItem,onPress:()=>e.navigate("Eventos Pasados"),children:(0,h.jsx)(c.default,{style:P.menuText,children:"Eventos pasados"})}),(0,h.jsx)(d.default,{style:P.menuItem,children:(0,h.jsx)(c.default,{style:[P.menuText,P.activeMenuItem],children:"Perfil"})})]})}),(0,h.jsx)(z.default,{visible:f,transparent:!0,onRequestClose:()=>m(!1),children:(0,h.jsx)(i.default,{style:P.modalContainer,children:(0,h.jsxs)(i.default,{style:P.deleteModalContent,children:[(0,h.jsx)(c.default,{style:P.deleteModalText,children:x}),(0,h.jsx)(i.default,{style:P.deleteModalButtons,children:(0,h.jsx)(d.default,{style:[P.actionButton,P.confirmButton],onPress:()=>m(!1),children:(0,h.jsx)(c.default,{style:P.actionButtonText,children:"Aceptar"})})})]})})})]})};function R(){const e=(0,r.useNavigation)(),[t,n]=(0,g.useState)([]),[o,a]=(0,g.useState)(!0),[s,u]=(0,g.useState)(!1),[f,m]=(0,g.useState)(null),[x,y]=(0,g.useState)(!1),[b,C]=(0,g.useState)(null),j=async()=>{try{const t=localStorage.getItem("token");if(!t)return void e.navigate("Iniciar Sesi\xf3n");const o=await fetch("https://conectasolidariaapi.vercel.app/api/ong/list",{headers:{Authorization:`Bearer ${t}`}}),a=await o.json();o.ok&&n(a)}catch(t){console.error("Error:",t)}finally{a(!1),u(!1)}};if((0,g.useEffect)((()=>{j()}),[]),o)return(0,h.jsx)(i.default,{style:W.container,children:(0,h.jsx)(c.default,{children:"Cargando eventos..."})});return(0,h.jsxs)(i.default,{style:W.mainContainer,children:[(0,h.jsxs)(p.default,{style:W.container,refreshControl:(0,h.jsx)(B.default,{refreshing:s,onRefresh:()=>{u(!0),j()}}),children:[(0,h.jsx)(c.default,{style:W.title,children:"Mis Eventos Creados"}),0===t.length?(0,h.jsx)(c.default,{style:W.noEvents,children:"No has creado ning\xfan evento"}):t.map((t=>{const n=new Date(t.event_date)<new Date;return(0,h.jsx)(i.default,{style:[W.eventCard,n&&W.pastEventCard],children:(0,h.jsxs)(i.default,{style:W.cardContent,children:[(0,h.jsxs)(i.default,{style:W.textContent,children:[n&&(0,h.jsx)(c.default,{style:W.pastEventLabel,children:"Evento finalizado"}),(0,h.jsx)(c.default,{style:W.eventTitle,children:t.title}),(0,h.jsx)(c.default,{style:W.eventDate,children:t.event_date?new Date(t.event_date).toLocaleString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Fecha no disponible"}),(0,h.jsx)(c.default,{style:W.eventDescription,children:t.description}),(0,h.jsxs)(c.default,{style:W.eventLocation,children:["\ud83d\udccd ",t.location]}),(0,h.jsxs)(c.default,{style:W.volunteerLimit,children:["\ud83d\udc65 Plazas m\xe1ximas: ",t.volunteer_limit||"Sin l\xedmite"]})]}),t.image_url&&(0,h.jsx)(d.default,{onPress:()=>m(t.image_url),children:(0,h.jsx)(l.default,{source:{uri:t.image_url},style:W.eventImage})}),(0,h.jsxs)(i.default,{style:W.actionButtons,children:[(0,h.jsx)(d.default,{style:[W.actionButton,W.editButton,n&&W.disabledButton],onPress:()=>e.navigate("Editar Evento",{eventId:t.event_id}),disabled:n,children:(0,h.jsx)(c.default,{style:[W.actionButtonText,n&&W.disabledButtonText],children:"Editar"})}),(0,h.jsx)(d.default,{style:[W.actionButton,W.deleteButton,n&&W.disabledButton],onPress:()=>{C(t.event_id),y(!0)},disabled:n,children:(0,h.jsx)(c.default,{style:[W.actionButtonText,n&&W.disabledButtonText],children:"Eliminar"})})]})]})},t.event_id)}))]}),(0,h.jsx)(z.default,{visible:null!==f,transparent:!0,onRequestClose:()=>m(null),children:(0,h.jsx)(i.default,{style:W.modalContainer,children:(0,h.jsxs)(i.default,{style:W.modalContent,children:[(0,h.jsx)(l.default,{source:{uri:f},style:W.modalImage}),(0,h.jsx)(d.default,{style:W.closeButton,onPress:()=>m(null),children:(0,h.jsx)(c.default,{style:W.closeButtonText,children:"\u2715"})})]})})}),(0,h.jsx)(z.default,{visible:x,transparent:!0,onRequestClose:()=>y(!1),children:(0,h.jsx)(i.default,{style:W.modalContainer,children:(0,h.jsxs)(i.default,{style:W.deleteModalContent,children:[(0,h.jsx)(c.default,{style:W.deleteModalText,children:"\xbfSeguro que quieres eliminar este evento?"}),(0,h.jsxs)(i.default,{style:W.deleteModalButtons,children:[(0,h.jsx)(d.default,{style:[W.actionButton,W.deleteButton],onPress:async()=>{if(b)try{const e=localStorage.getItem("token");(await fetch(`https://conectasolidariaapi.vercel.app/api/ong/delete/${b}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`}})).ok?n(t.filter((e=>e.event_id!==b))):alert("Error eliminando el evento")}catch(e){alert("Error eliminando el evento")}finally{y(!1),C(null)}},children:(0,h.jsx)(c.default,{style:W.actionButtonText,children:"Eliminar"})}),(0,h.jsx)(d.default,{style:[W.actionButton,W.editButton],onPress:()=>y(!1),children:(0,h.jsx)(c.default,{style:W.actionButtonText,children:"Cancelar"})})]})]})})}),(0,h.jsxs)(i.default,{style:W.bottomMenu,children:[(0,h.jsx)(d.default,{style:W.menuItem,onPress:()=>e.navigate("Crear Evento"),children:(0,h.jsx)(c.default,{style:W.menuText,children:"Crear Evento"})}),(0,h.jsx)(d.default,{style:W.menuItem,children:(0,h.jsx)(c.default,{style:[W.menuText,W.activeMenuItem],children:"Mis Eventos"})}),(0,h.jsx)(d.default,{style:W.menuItem,onPress:()=>e.navigate("Perfil"),children:(0,h.jsx)(c.default,{style:W.menuText,children:"Perfil"})})]})]})}const W=f.default.create({mainContainer:{flex:1,backgroundColor:"#F4F6F7"},container:{flex:1,backgroundColor:"#F4F6F7",padding:16},title:{fontSize:24,fontWeight:"bold",marginBottom:20,color:"#1C2833",textAlign:"center"},eventCard:{backgroundColor:"#FFFFFF",borderRadius:12,padding:16,marginBottom:16,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3,borderWidth:1,borderColor:"#A9CCE3"},eventTitle:{fontSize:18,fontWeight:"bold",color:"#1C2833",marginBottom:8},eventDate:{fontSize:14,color:"#1C2833",marginBottom:8},eventDescription:{fontSize:16,color:"#1C2833",marginBottom:8,lineHeight:22},eventLocation:{fontSize:14,color:"#1C2833"},volunteerLimit:{fontSize:14,color:"#1C2833",marginTop:8,fontWeight:"500"},noEvents:{textAlign:"center",fontSize:16,color:"#1C2833",marginTop:20},bottomMenu:{flexDirection:"row",justifyContent:"space-around",alignItems:"center",backgroundColor:"#2E86AB",paddingVertical:12,borderTopWidth:1,borderTopColor:"#A9CCE3"},menuItem:{flex:1,alignItems:"center",paddingVertical:8},menuText:{fontSize:14,color:"#F4F6F7"},activeMenuItem:{color:"#F4F6F7",fontWeight:"bold"},pastEventCard:{backgroundColor:"#F4F6F7",opacity:.6},pastEventLabel:{color:"#2E86AB",fontSize:14,fontWeight:"bold",marginBottom:8},cardContent:{flex:1,flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start"},textContent:{flex:1,minWidth:0,paddingRight:8},eventImage:{width:120,height:120,borderRadius:8,resizeMode:"cover",marginLeft:0,marginRight:0,alignSelf:"flex-start"},disabledButton:{backgroundColor:"#A9CCE3",opacity:.5},disabledButtonText:{color:"#1C2833"},actionButtons:{flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-end",alignSelf:"flex-start",marginLeft:8,minWidth:80},actionButton:{paddingVertical:6,paddingHorizontal:12,borderRadius:6,marginBottom:8,minWidth:70,alignItems:"center"},editButton:{backgroundColor:"#2E86AB"},deleteButton:{backgroundColor:"#1C2833"},actionButtonText:{color:"#F4F6F7",fontWeight:"bold",fontSize:14},modalContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},deleteModalContent:{backgroundColor:"#F4F6F7",padding:20,borderRadius:12,width:"80%",maxWidth:400,alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:4,elevation:5},deleteModalText:{fontSize:16,marginBottom:20,textAlign:"center",color:"#1C2833"},deleteModalButtons:{flexDirection:"row",justifyContent:"space-around",width:"100%",gap:20},modalContent:{flex:1,width:"100%",height:"100%",justifyContent:"center",alignItems:"center",backgroundColor:"transparent",padding:0,borderRadius:0},modalImage:{flex:1,width:"100%",height:"100%",borderRadius:0,resizeMode:"contain"},closeButton:{position:"absolute",top:30,right:30,backgroundColor:"#F4F6F7",borderRadius:15,width:30,height:30,justifyContent:"center",alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:5},closeButtonText:{fontSize:16,color:"#1C2833",fontWeight:"bold"}});function O(){const e=(0,r.useNavigation)(),t=(0,r.useRoute)(),{eventId:n}=t.params,[o,a]=(0,g.useState)(""),[s,f]=(0,g.useState)(""),[m,x]=(0,g.useState)(""),[y,b]=(0,g.useState)(new Date),[C,F]=(0,g.useState)(""),[S,T]=(0,g.useState)(null),[w,E]=(0,g.useState)(!1),[B,I]=(0,g.useState)(!0),[k,A]=(0,g.useState)(!1);(0,g.useEffect)((()=>{_()}),[n]);const _=async()=>{try{const e=localStorage.getItem("token"),t=await fetch(`https://conectasolidariaapi.vercel.app/api/ong/event/${n}`,{headers:{Authorization:`Bearer ${e}`}}),o=await t.json();t.ok?(a(o.title),f(o.description),x(o.location),b(new Date(o.event_date)),F(o.volunteer_limit?.toString()||""),T(o.image_url)):setError("Error al cargar los datos del evento")}catch(e){setError("Error al cargar los datos del evento")}finally{I(!1)}};return B?(0,h.jsx)(i.default,{style:M.container,children:(0,h.jsx)(c.default,{children:"Cargando..."})}):(0,h.jsxs)(p.default,{style:M.container,children:[(0,h.jsx)(c.default,{style:M.title,children:"Editar Evento"}),(0,h.jsxs)(i.default,{style:M.formGroup,children:[(0,h.jsx)(c.default,{style:M.label,children:"T\xedtulo"}),(0,h.jsx)(u.default,{style:M.input,value:o,onChangeText:a,placeholder:"T\xedtulo del evento"})]}),(0,h.jsxs)(i.default,{style:M.formGroup,children:[(0,h.jsx)(c.default,{style:M.label,children:"Descripci\xf3n"}),(0,h.jsx)(u.default,{style:[M.input,M.textArea],value:s,onChangeText:f,placeholder:"Descripci\xf3n del evento",multiline:!0,numberOfLines:4})]}),(0,h.jsxs)(i.default,{style:M.formGroup,children:[(0,h.jsx)(c.default,{style:M.label,children:"Ubicaci\xf3n"}),(0,h.jsx)(u.default,{style:M.input,value:m,onChangeText:x,placeholder:"Ubicaci\xf3n del evento"})]}),(0,h.jsxs)(i.default,{style:M.formGroup,children:[(0,h.jsx)(c.default,{style:M.label,children:"Fecha y Hora"}),(0,h.jsx)("input",{type:"datetime-local",value:y.toISOString().slice(0,16),onChange:e=>b(new Date(e.target.value)),style:{backgroundColor:"white",padding:12,borderRadius:8,borderWidth:1,borderColor:"#90CDF4",width:"100%",fontSize:16,border:"1px solid #90CDF4",outline:"none",boxSizing:"border-box"}})]}),(0,h.jsxs)(i.default,{style:M.formGroup,children:[(0,h.jsx)(c.default,{style:M.label,children:"L\xedmite de Voluntarios"}),(0,h.jsx)(u.default,{style:[M.input,{opacity:.5}],value:C,onChangeText:F,placeholder:"L\xedmite de voluntarios",keyboardType:"numeric",readOnly:!0})]}),(0,h.jsxs)(i.default,{style:M.formGroup,children:[(0,h.jsx)(c.default,{style:M.label,children:"Imagen"}),(0,h.jsx)(d.default,{style:M.imageButton,onPress:async()=>{const e=await j.launchImageLibraryAsync({mediaTypes:v.MediaTypeOptions.Images,allowsEditing:!0,aspect:[4,3],quality:1});e.canceled||T(e.assets[0].uri)},children:(0,h.jsx)(c.default,{style:M.imageButtonText,children:"Seleccionar Imagen"})}),S&&(0,h.jsx)(l.default,{source:{uri:S},style:M.imagePreview})]}),(0,h.jsx)(d.default,{style:M.submitButton,onPress:async()=>{try{const t=localStorage.getItem("token"),a=new FormData;if(a.append("title",o),a.append("description",s),a.append("location",m),a.append("event_date",y.toISOString().slice(0,19).replace("T"," ")),C&&a.append("volunteer_limit",C),S&&!S.startsWith("http")){const e=await fetch(S),t=await e.blob();a.append("image_file",t,"image.jpg")}const r=await fetch(`https://conectasolidariaapi.vercel.app/api/ong/edit/${n}`,{method:"PUT",headers:{Authorization:`Bearer ${t}`},body:a});if(r.ok)A(!0),setTimeout((()=>{A(!1),e.navigate("Eventos Creados")}),2e3);else{const e=await r.json();setError(e.message||"Error al actualizar el evento")}}catch(t){setError("Error al actualizar el evento")}},children:(0,h.jsx)(c.default,{style:M.submitButtonText,children:"Actualizar Evento"})}),(0,h.jsx)(z.default,{visible:k,transparent:!0,onRequestClose:()=>A(!1),children:(0,h.jsx)(i.default,{style:M.modalContainer,children:(0,h.jsx)(i.default,{style:M.modalContent,children:(0,h.jsx)(c.default,{style:M.modalText,children:"Evento actualizado exitosamente"})})})})]})}const M=f.default.create({container:{flex:1,backgroundColor:"#F4F6F7",padding:16},imageButtonText:{color:"#FFFFFF",fontWeight:"bold",fontSize:16},title:{fontSize:28,fontWeight:"bold",color:"#1C2833",marginBottom:24,textAlign:"center"},formGroup:{marginBottom:20},label:{fontSize:16,fontWeight:"600",color:"#1C2833",marginBottom:8},input:{backgroundColor:"#FFFFFF",padding:15,borderRadius:10,borderWidth:1,borderColor:"#A9CCE3",fontSize:16,color:"#1C2833"},textArea:{minHeight:100,textAlignVertical:"top"},dateButton:{backgroundColor:"#FFFFFF",padding:15,borderRadius:10,borderWidth:1,borderColor:"#A9CCE3"},imageContainer:{alignItems:"center",marginVertical:20},imagePreview:{width:200,height:200,borderRadius:10,marginBottom:10},button:{backgroundColor:"#2E86AB",padding:15,borderRadius:10,alignItems:"center",marginVertical:10},buttonText:{color:"#F4F6F7",fontSize:16,fontWeight:"600"},imageButton:{backgroundColor:"#2E86AB",color:"white",fontWeight:"bold",fontSize:16,padding:15,borderRadius:10,alignItems:"center",marginTop:10},submitButton:{backgroundColor:"#2E86AB",padding:15,borderRadius:10,alignItems:"center",marginTop:20},submitButtonText:{color:"#F4F6F7",fontSize:18,fontWeight:"600"},modalContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},modalContent:{backgroundColor:"#FFFFFF",padding:20,borderRadius:10,alignItems:"center",elevation:5,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:4},modalText:{fontSize:16,color:"#1C2833",textAlign:"center"}}),L=(0,g.createContext)(),N=({children:e})=>{const[t,n]=(0,g.useState)("");return(0,h.jsx)(L.Provider,{value:{word:t,setWord:n},children:e})},$=(0,a.createNativeStackNavigator)(),V=()=>(0,h.jsx)(N,{children:(0,h.jsx)(r.NavigationContainer,{children:(0,h.jsxs)($.Navigator,{initialRouteName:"Iniciar Sesi\xf3n",children:[(0,h.jsx)($.Screen,{name:"Iniciar Sesi\xf3n",component:m,options:({navigation:e})=>H(e)}),(0,h.jsx)($.Screen,{name:"Registro",component:y,options:({navigation:e})=>H(e)}),(0,h.jsx)($.Screen,{name:"Eventos Disponibles",component:I,options:({navigation:e})=>H(e)}),(0,h.jsx)($.Screen,{name:"Crear Evento",component:w,options:({navigation:e})=>H(e)}),(0,h.jsx)($.Screen,{name:"Eventos Creados",component:R,options:({navigation:e})=>H(e)}),(0,h.jsx)($.Screen,{name:"Editar Evento",component:O,options:({navigation:e})=>H(e)}),(0,h.jsx)($.Screen,{name:"Eventos Pasados",component:A,options:({navigation:e})=>H(e)}),(0,h.jsx)($.Screen,{name:"Perfil",component:D,options:({navigation:e})=>H(e)})]})})}),H=e=>({headerTitle:()=>(0,h.jsxs)(i.default,{style:{flexDirection:"row",alignItems:"center",justifyContent:"center",width:"100%",position:"relative"},children:[(0,h.jsxs)(i.default,{style:{flexDirection:"row",alignItems:"center",justifyContent:"center",flex:1},children:[(0,h.jsx)(l.default,{source:n(4082),style:{width:40,height:40},resizeMode:"contain"}),(0,h.jsx)(l.default,{source:n(6863),style:{width:80,height:40,marginLeft:10},resizeMode:"contain"})]}),(0,h.jsx)(s.default,{onPress:()=>e.navigate("Iniciar Sesi\xf3n"),style:{position:"absolute",right:0},children:(0,h.jsx)(l.default,{source:n(5968),style:{width:60,height:60},resizeMode:"contain"})})]}),headerTitleContainerStyle:{width:"100%",left:0}});(0,o.default)(V)},4082:(e,t,n)=>{e.exports=n.p+"static/media/logo.7ad4fc594297c7a94d06.png"},5968:(e,t,n)=>{e.exports=n.p+"static/media/login-icon.c4fcade8e47977351fb1.jpg"},6863:(e,t,n)=>{e.exports=n.p+"static/media/texto.cc44e782dbc2869b092c.png"}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}n.m=e,(()=>{var e=[];n.O=(t,o,a,r)=>{if(!o){var i=1/0;for(c=0;c<e.length;c++){for(var[o,a,r]=e[c],l=!0,s=0;s<o.length;s++)(!1&r||i>=r)&&Object.keys(n.O).every((e=>n.O[e](o[s])))?o.splice(s--,1):(l=!1,r<i&&(i=r));if(l){e.splice(c--,1);var d=a();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[o,a,r]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var a,r,[i,l,s]=o,d=0;if(i.some((t=>0!==e[t]))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(s)var c=s(n)}for(t&&t(o);d<i.length;d++)r=i[d],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},o=self.webpackChunkweb=self.webpackChunkweb||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=n.O(void 0,[963],(()=>n(2707)));o=n.O(o)})();
//# sourceMappingURL=main.c83cbd54.js.map